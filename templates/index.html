{% extends "base.html" %}

{% block title %}Home - Nail Art Recommendation{% endblock %}

{% block content %}
<!-- Filter Sidebar -->
<div class="filter-sidebar" id="filterSidebar">
    <div class="filter-header">
        <h2><i class="fas fa-sliders-h"></i> Filters</h2>
        <button class="close-filters" id="closeFilters">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <div class="filters-content">
        <div class="filter-group">
            <h3>Nail Shape</h3>
            <div class="filter-options">
                <label class="filter-option">
                    <input type="checkbox" name="shape" value="Almond">
                    <span>Almond</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="shape" value="Square">
                    <span>Square</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="shape" value="Coffin">
                    <span>Coffin</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="shape" value="Stiletto">
                    <span>Stiletto</span>
                </label>
            </div>
        </div>

        <div class="filter-group">
            <h3>Style</h3>
            <div class="filter-options">
                <label class="filter-option">
                    <input type="checkbox" name="style" value="Minimalist">
                    <span>Minimalist</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="style" value="Floral">
                    <span>Floral</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="style" value="Geometric">
                    <span>Geometric</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="style" value="Glitter">
                    <span>Glitter</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="style" value="French">
                    <span>French</span>
                </label>
            </div>
        </div>

        <div class="filter-group">
            <h3>Color</h3>
            <div class="filter-options">
                <label class="filter-option">
                    <input type="checkbox" name="color" value="Pink">
                    <span class="color-dot" style="background:#ff69b4;"></span>
                    <span>Pink</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="color" value="Red">
                    <span class="color-dot" style="background:#ff4d4d;"></span>
                    <span>Red</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="color" value="Blue">
                    <span class="color-dot" style="background:#4d79ff;"></span>
                    <span>Blue</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="color" value="Nude">
                    <span class="color-dot" style="background:#f5e2ce;"></span>
                    <span>Nude</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="color" value="Black">
                    <span class="color-dot" style="background:#222;"></span>
                    <span>Black</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="color" value="White">
                    <span class="color-dot" style="background:#fff; border:1px solid #ccc;"></span>
                    <span>White</span>
                </label>
            </div>
        </div>

        <div class="filter-apply">
             <button id="applyFiltersBtn" class="load-more-btn" style="width: 100%;">Apply Filters</button>
        </div>
    </div>
</div>

<!-- Main Content -->
<div class="main-content">
    <div class="container">
        <!-- Top Bar with Search and Filter Toggle -->
        <div class="top-bar">
            <div class="search-wrapper">
                <button class="filter-toggle" id="openFilters">
                    <i class="fas fa-sliders-h"></i>
                    Filters
                </button>
                <div class="main-search-bar">
                    <input type="text" placeholder="Search nail art designs...">
                    <button type="submit">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </div>

        <section class="hero-section">
            <h1>Discover Your Perfect Nail Art Style</h1>
            <p>Explore thousands of designs and find inspiration for your next manicure</p>
        </section>

        <section class="gallery-section">
            <div id="galleryGrid" class="gallery-grid">
                <!-- 图片将由JS动态渲染 -->
            </div>
            <div class="load-more">
                <button id="loadMoreBtn" class="load-more-btn">Explore More</button>
            </div>
        </section>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Filter sidebar toggle
        const filterSidebar = document.getElementById('filterSidebar');
        const openFiltersBtn = document.getElementById('openFilters');
        const closeFiltersBtn = document.getElementById('closeFilters');

        // Check if filter elements exist before adding listeners
        if (filterSidebar && openFiltersBtn && closeFiltersBtn) {
            openFiltersBtn.addEventListener('click', function() {
                console.log('Open Filters button clicked.'); // Added log
                filterSidebar.classList.add('active');
            });

            closeFiltersBtn.addEventListener('click', function() {
                console.log('Close Filters button clicked.'); // Added log
                filterSidebar.classList.remove('active');
            });

            // Add event listener for the new Apply Filters button
            const applyFiltersBtn = document.getElementById('applyFiltersBtn');
            if (applyFiltersBtn) {
                applyFiltersBtn.addEventListener('click', function() {
                    console.log('Apply Filters button clicked.'); // Log button click
                    // Close filter sidebar by removing the active class
                    filterSidebar.classList.remove('active'); // Modified closing logic

                    currentPage = 1; // Reset to first page on new filter application
                    loadImages(1, true); // Load images with new filters
                });
            }
        }

        // Note: Like and Save button functionality is now handled by the dynamic rendering in main.js
        // The event listeners for .like-btn and .save-btn are added after images are rendered.
    });
</script>
{% endblock %} 